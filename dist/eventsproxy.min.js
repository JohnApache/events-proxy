!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).eventsproxy=e()}(this,(function(){"use strict";var t=Object.freeze({}),e=Math.ceil,n=Math.floor,r=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)},o=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},i=function(t){return function(e,n){var i,c,u=String(o(e)),a=r(n),f=u.length;return a<0||a>=f?t?"":void 0:(i=u.charCodeAt(a))<55296||i>56319||a+1===f||(c=u.charCodeAt(a+1))<56320||c>57343?t?u.charAt(a):i:t?u.slice(a,a+2):c-56320+(i-55296<<10)+65536}},c={codeAt:i(!1),charAt:i(!0)},u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}var f=function(t){return t&&t.Math==Math&&t},s=f("object"==typeof globalThis&&globalThis)||f("object"==typeof window&&window)||f("object"==typeof self&&self)||f("object"==typeof u&&u)||Function("return this")(),l=function(t){try{return!!t()}catch(t){return!0}},p=!l((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),h=function(t){return"object"==typeof t?null!==t:"function"==typeof t},v=s.document,y=h(v)&&h(v.createElement),d=function(t){return y?v.createElement(t):{}},_=!p&&!l((function(){return 7!=Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a})),g=function(t){if(!h(t))throw TypeError(String(t)+" is not an object");return t},m=function(t,e){if(!h(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!h(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!h(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!h(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},k=Object.defineProperty,b={f:p?k:function(t,e,n){if(g(t),e=m(e,!0),g(n),_)try{return k(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},w=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},S=p?function(t,e,n){return b.f(t,e,w(1,n))}:function(t,e,n){return t[e]=n,t},E=s["__core-js_shared__"]||function(t,e){try{S(s,t,e)}catch(n){s[t]=e}return e}("__core-js_shared__",{}),x=Function.toString;"function"!=typeof E.inspectSource&&(E.inspectSource=function(t){return x.call(t)});var j,A,P,O=E.inspectSource,T=s.WeakMap,L="function"==typeof T&&/native code/.test(O(T)),M={}.hasOwnProperty,C=function(t,e){return M.call(t,e)},I=a((function(t){(t.exports=function(t,e){return E[t]||(E[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:"pure",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),F=0,N=Math.random(),R=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++F+N).toString(36)},V=I("keys"),D=function(t){return V[t]||(V[t]=R(t))},B={},G=s.WeakMap;if(L){var K=new G,U=K.get,q=K.has,z=K.set;j=function(t,e){return z.call(K,t,e),e},A=function(t){return U.call(K,t)||{}},P=function(t){return q.call(K,t)}}else{var H=D("state");B[H]=!0,j=function(t,e){return S(t,H,e),e},A=function(t){return C(t,H)?t[H]:{}},P=function(t){return C(t,H)}}var W,X,Y,J={set:j,get:A,has:P,enforce:function(t){return P(t)?A(t):j(t,{})},getterFor:function(t){return function(e){var n;if(!h(e)||(n=A(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Q={}.propertyIsEnumerable,Z=Object.getOwnPropertyDescriptor,$={f:Z&&!Q.call({1:2},1)?function(t){var e=Z(this,t);return!!e&&e.enumerable}:Q},tt={}.toString,et=function(t){return tt.call(t).slice(8,-1)},nt="".split,rt=l((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==et(t)?nt.call(t,""):Object(t)}:Object,ot=function(t){return rt(o(t))},it=Object.getOwnPropertyDescriptor,ct={f:p?it:function(t,e){if(t=ot(t),e=m(e,!0),_)try{return it(t,e)}catch(t){}if(C(t,e))return w(!$.f.call(t,e),t[e])}},ut=/#|\.prototype\./,at=function(t,e){var n=st[ft(t)];return n==pt||n!=lt&&("function"==typeof e?l(e):!!e)},ft=at.normalize=function(t){return String(t).replace(ut,".").toLowerCase()},st=at.data={},lt=at.NATIVE="N",pt=at.POLYFILL="P",ht=at,vt={},yt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},dt=function(t,e,n){if(yt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},_t=ct.f,gt=function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e},mt=function(t,e){var n,r,o,i,c,u,a,f,l=t.target,p=t.global,h=t.stat,v=t.proto,y=p?s:h?s[l]:(s[l]||{}).prototype,d=p?vt:vt[l]||(vt[l]={}),_=d.prototype;for(o in e)n=!ht(p?o:l+(h?".":"#")+o,t.forced)&&y&&C(y,o),c=d[o],n&&(u=t.noTargetGet?(f=_t(y,o))&&f.value:y[o]),i=n&&u?u:e[o],n&&typeof c==typeof i||(a=t.bind&&n?dt(i,s):t.wrap&&n?gt(i):v&&"function"==typeof i?dt(Function.call,i):i,(t.sham||i&&i.sham||c&&c.sham)&&S(a,"sham",!0),d[o]=a,v&&(C(vt,r=l+"Prototype")||S(vt,r,{}),vt[r][o]=i,t.real&&_&&!_[o]&&S(_,o,i)))},kt=function(t){return Object(o(t))},bt=!l((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),wt=D("IE_PROTO"),St=Object.prototype,Et=bt?Object.getPrototypeOf:function(t){return t=kt(t),C(t,wt)?t[wt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?St:null},xt=!!Object.getOwnPropertySymbols&&!l((function(){return!String(Symbol())})),jt=xt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,At=I("wks"),Pt=s.Symbol,Ot=jt?Pt:Pt&&Pt.withoutSetter||R,Tt=function(t){return C(At,t)||(xt&&C(Pt,t)?At[t]=Pt[t]:At[t]=Ot("Symbol."+t)),At[t]},Lt=(Tt("iterator"),!1);[].keys&&("next"in(Y=[].keys())?(X=Et(Et(Y)))!==Object.prototype&&(W=X):Lt=!0),null==W&&(W={});var Mt,Ct={IteratorPrototype:W,BUGGY_SAFARI_ITERATORS:Lt},It=Math.min,Ft=function(t){return t>0?It(r(t),9007199254740991):0},Nt=Math.max,Rt=Math.min,Vt=function(t){return function(e,n,o){var i,c=ot(e),u=Ft(c.length),a=function(t,e){var n=r(t);return n<0?Nt(n+e,0):Rt(n,e)}(o,u);if(t&&n!=n){for(;u>a;)if((i=c[a++])!=i)return!0}else for(;u>a;a++)if((t||a in c)&&c[a]===n)return t||a||0;return!t&&-1}},Dt={includes:Vt(!0),indexOf:Vt(!1)}.indexOf,Bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Gt=Object.keys||function(t){return function(t,e){var n,r=ot(t),o=0,i=[];for(n in r)!C(B,n)&&C(r,n)&&i.push(n);for(;e.length>o;)C(r,n=e[o++])&&(~Dt(i,n)||i.push(n));return i}(t,Bt)},Kt=p?Object.defineProperties:function(t,e){g(t);for(var n,r=Gt(e),o=r.length,i=0;o>i;)b.f(t,n=r[i++],e[n]);return t},Ut=function(t){return"function"==typeof t?t:void 0},qt=function(t,e){return arguments.length<2?Ut(vt[t])||Ut(s[t]):vt[t]&&vt[t][e]||s[t]&&s[t][e]},zt=qt("document","documentElement"),Ht=D("IE_PROTO"),Wt=function(){},Xt=function(t){return"<script>"+t+"<\/script>"},Yt=function(){try{Mt=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Yt=Mt?function(t){t.write(Xt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Mt):((e=d("iframe")).style.display="none",zt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Xt("document.F=Object")),t.close(),t.F);for(var n=Bt.length;n--;)delete Yt.prototype[Bt[n]];return Yt()};B[Ht]=!0;var Jt=Object.create||function(t,e){var n;return null!==t?(Wt.prototype=g(t),n=new Wt,Wt.prototype=null,n[Ht]=t):n=Yt(),void 0===e?n:Kt(n,e)},Qt={};Qt[Tt("toStringTag")]="z";var Zt="[object z]"===String(Qt),$t=Tt("toStringTag"),te="Arguments"==et(function(){return arguments}()),ee=Zt?et:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),$t))?n:te?et(e):"Object"==(r=et(e))&&"function"==typeof e.callee?"Arguments":r},ne=Zt?{}.toString:function(){return"[object "+ee(this)+"]"},re=b.f,oe=Tt("toStringTag"),ie=function(t,e,n,r){if(t){var o=n?t:t.prototype;C(o,oe)||re(o,oe,{configurable:!0,value:e}),r&&!Zt&&S(o,"toString",ne)}},ce={},ue=Ct.IteratorPrototype,ae=function(){return this},fe=(Object.setPrototypeOf||"__proto__"in{}&&function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}}(),function(t,e,n,r){r&&r.enumerable?t[e]=n:S(t,e,n)}),se=Ct.IteratorPrototype,le=Ct.BUGGY_SAFARI_ITERATORS,pe=Tt("iterator"),he=function(){return this},ve=function(t,e,n,r,o,i,c){!function(t,e,n){var r=e+" Iterator";t.prototype=Jt(ue,{next:w(1,n)}),ie(t,r,!1,!0),ce[r]=ae}(n,e,r);var u,a,f,s=function(t){if(t===o&&y)return y;if(!le&&t in h)return h[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",p=!1,h=t.prototype,v=h[pe]||h["@@iterator"]||o&&h[o],y=!le&&v||s(o),d="Array"==e&&h.entries||v;if(d&&(u=Et(d.call(new t)),se!==Object.prototype&&u.next&&(ie(u,l,!0,!0),ce[l]=he)),"values"==o&&v&&"values"!==v.name&&(p=!0,y=function(){return v.call(this)}),c&&h[pe]!==y&&S(h,pe,y),ce[e]=y,o)if(a={values:s("values"),keys:i?y:s("keys"),entries:s("entries")},c)for(f in a)(le||p||!(f in h))&&fe(h,f,a[f]);else mt({target:e,proto:!0,forced:le||p},a);return a},ye=c.charAt,de=J.set,_e=J.getterFor("String Iterator");ve(String,"String",(function(t){de(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=_e(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=ye(n,r),e.index+=t.length,{value:t,done:!1})}));var ge=J.set,me=J.getterFor("Array Iterator");ve(Array,"Array",(function(t,e){ge(this,{type:"Array Iterator",target:ot(t),index:0,kind:e})}),(function(){var t=me(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");ce.Arguments=ce.Array;var ke=Tt("toStringTag");for(var be in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var we=s[be],Se=we&&we.prototype;Se&&ee(Se)!==ke&&S(Se,ke,be),ce[be]=ce.Array}var Ee=s.Promise,xe=Tt("species"),je=Tt("iterator"),Ae=Array.prototype,Pe=function(t){return void 0!==t&&(ce.Array===t||Ae[je]===t)},Oe=Tt("iterator"),Te=function(t){if(null!=t)return t[Oe]||t["@@iterator"]||ce[ee(t)]},Le=function(t,e,n,r){try{return r?e(g(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&g(o.call(t)),e}},Me=a((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,o,i){var c,u,a,f,s,l,p,h=dt(n,r,o?2:1);if(i)c=t;else{if("function"!=typeof(u=Te(t)))throw TypeError("Target is not iterable");if(Pe(u)){for(a=0,f=Ft(t.length);f>a;a++)if((s=o?h(g(p=t[a])[0],p[1]):h(t[a]))&&s instanceof e)return s;return new e(!1)}c=u.call(t)}for(l=c.next;!(p=l.call(c)).done;)if("object"==typeof(s=Le(c,h,p.value,o))&&s&&s instanceof e)return s;return new e(!1)}).stop=function(t){return new e(!0,t)}})),Ce=Tt("iterator"),Ie=!1;try{var Fe=0,Ne={next:function(){return{done:!!Fe++}},return:function(){Ie=!0}};Ne[Ce]=function(){return this},Array.from(Ne,(function(){throw 2}))}catch(t){}var Re,Ve,De,Be=function(t,e){if(!e&&!Ie)return!1;var n=!1;try{var r={};r[Ce]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Ge=Tt("species"),Ke=function(t,e){var n,r=g(t).constructor;return void 0===r||null==(n=g(r)[Ge])?e:yt(n)},Ue=qt("navigator","userAgent")||"",qe=/(iphone|ipod|ipad).*applewebkit/i.test(Ue),ze=s.location,He=s.setImmediate,We=s.clearImmediate,Xe=s.process,Ye=s.MessageChannel,Je=s.Dispatch,Qe=0,Ze={},$e=function(t){if(Ze.hasOwnProperty(t)){var e=Ze[t];delete Ze[t],e()}},tn=function(t){return function(){$e(t)}},en=function(t){$e(t.data)},nn=function(t){s.postMessage(t+"",ze.protocol+"//"+ze.host)};He&&We||(He=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Ze[++Qe]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Re(Qe),Qe},We=function(t){delete Ze[t]},"process"==et(Xe)?Re=function(t){Xe.nextTick(tn(t))}:Je&&Je.now?Re=function(t){Je.now(tn(t))}:Ye&&!qe?(De=(Ve=new Ye).port2,Ve.port1.onmessage=en,Re=dt(De.postMessage,De,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||l(nn)||"file:"===ze.protocol?Re="onreadystatechange"in d("script")?function(t){zt.appendChild(d("script")).onreadystatechange=function(){zt.removeChild(this),$e(t)}}:function(t){setTimeout(tn(t),0)}:(Re=nn,s.addEventListener("message",en,!1)));var rn,on,cn,un,an,fn,sn,ln,pn={set:He,clear:We},hn=ct.f,vn=pn.set,yn=s.MutationObserver||s.WebKitMutationObserver,dn=s.process,_n=s.Promise,gn="process"==et(dn),mn=hn(s,"queueMicrotask"),kn=mn&&mn.value;kn||(rn=function(){var t,e;for(gn&&(t=dn.domain)&&t.exit();on;){e=on.fn,on=on.next;try{e()}catch(t){throw on?un():cn=void 0,t}}cn=void 0,t&&t.enter()},gn?un=function(){dn.nextTick(rn)}:yn&&!qe?(an=!0,fn=document.createTextNode(""),new yn(rn).observe(fn,{characterData:!0}),un=function(){fn.data=an=!an}):_n&&_n.resolve?(sn=_n.resolve(void 0),ln=sn.then,un=function(){ln.call(sn,rn)}):un=function(){vn.call(s,rn)});var bn,wn,Sn=kn||function(t){var e={fn:t,next:void 0};cn&&(cn.next=e),on||(on=e,un()),cn=e},En=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=yt(e),this.reject=yt(n)},xn={f:function(t){return new En(t)}},jn=function(t,e){if(g(t),h(e)&&e.constructor===t)return e;var n=xn.f(t);return(0,n.resolve)(e),n.promise},An=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Pn=s.process,On=Pn&&Pn.versions,Tn=On&&On.v8;Tn?wn=(bn=Tn.split("."))[0]+bn[1]:Ue&&(!(bn=Ue.match(/Edge\/(\d+)/))||bn[1]>=74)&&(bn=Ue.match(/Chrome\/(\d+)/))&&(wn=bn[1]);var Ln,Mn,Cn,In=wn&&+wn,Fn=pn.set,Nn=Tt("species"),Rn="Promise",Vn=J.get,Dn=J.set,Bn=J.getterFor(Rn),Gn=Ee,Kn=s.TypeError,Un=s.document,qn=s.process,zn=(qt("fetch"),xn.f),Hn=zn,Wn="process"==et(qn),Xn=!!(Un&&Un.createEvent&&s.dispatchEvent),Yn=ht(Rn,(function(){if(!(O(Gn)!==String(Gn))){if(66===In)return!0;if(!Wn&&"function"!=typeof PromiseRejectionEvent)return!0}if(!Gn.prototype.finally)return!0;if(In>=51&&/native code/.test(Gn))return!1;var t=Gn.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Nn]=e,!(t.then((function(){}))instanceof e)})),Jn=Yn||!Be((function(t){Gn.all(t).catch((function(){}))})),Qn=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},Zn=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;Sn((function(){for(var o=e.value,i=1==e.state,c=0;r.length>c;){var u,a,f,s=r[c++],l=i?s.ok:s.fail,p=s.resolve,h=s.reject,v=s.domain;try{l?(i||(2===e.rejection&&nr(t,e),e.rejection=1),!0===l?u=o:(v&&v.enter(),u=l(o),v&&(v.exit(),f=!0)),u===s.promise?h(Kn("Promise-chain cycle")):(a=Qn(u))?a.call(u,p,h):p(u)):h(o)}catch(t){v&&!f&&v.exit(),h(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&tr(t,e)}))}},$n=function(t,e,n){var r,o;Xn?((r=Un.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),s.dispatchEvent(r)):r={promise:e,reason:n},(o=s["on"+t])?o(r):"unhandledrejection"===t&&function(t,e){var n=s.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},tr=function(t,e){Fn.call(s,(function(){var n,r=e.value;if(er(e)&&(n=An((function(){Wn?qn.emit("unhandledRejection",r,t):$n("unhandledrejection",t,r)})),e.rejection=Wn||er(e)?2:1,n.error))throw n.value}))},er=function(t){return 1!==t.rejection&&!t.parent},nr=function(t,e){Fn.call(s,(function(){Wn?qn.emit("rejectionHandled",t):$n("rejectionhandled",t,e.value)}))},rr=function(t,e,n,r){return function(o){t(e,n,o,r)}},or=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Zn(t,e,!0))},ir=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw Kn("Promise can't be resolved itself");var o=Qn(n);o?Sn((function(){var r={done:!1};try{o.call(n,rr(ir,t,r,e),rr(or,t,r,e))}catch(n){or(t,r,n,e)}})):(e.value=n,e.state=1,Zn(t,e,!1))}catch(n){or(t,{done:!1},n,e)}}};Yn&&(Gn=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,Gn,Rn),yt(t),Ln.call(this);var e=Vn(this);try{t(rr(ir,this,e),rr(or,this,e))}catch(t){or(this,e,t)}},(Ln=function(t){Dn(this,{type:Rn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)n&&n.unsafe&&t[r]?t[r]=e[r]:fe(t,r,e[r],n);return t}(Gn.prototype,{then:function(t,e){var n=Bn(this),r=zn(Ke(this,Gn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Wn?qn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Zn(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Mn=function(){var t=new Ln,e=Vn(t);this.promise=t,this.resolve=rr(ir,t,e),this.reject=rr(or,t,e)},xn.f=zn=function(t){return t===Gn||t===Cn?new Mn(t):Hn(t)}),mt({global:!0,wrap:!0,forced:Yn},{Promise:Gn}),ie(Gn,Rn,!1,!0),function(t){var e=qt(t),n=b.f;p&&e&&!e[xe]&&n(e,xe,{configurable:!0,get:function(){return this}})}(Rn),Cn=qt(Rn),mt({target:Rn,stat:!0,forced:Yn},{reject:function(t){var e=zn(this);return e.reject.call(void 0,t),e.promise}}),mt({target:Rn,stat:!0,forced:!0},{resolve:function(t){return jn(this===Cn?Gn:this,t)}}),mt({target:Rn,stat:!0,forced:Jn},{all:function(t){var e=this,n=zn(e),r=n.resolve,o=n.reject,i=An((function(){var n=yt(e.resolve),i=[],c=0,u=1;Me(t,(function(t){var a=c++,f=!1;i.push(void 0),u++,n.call(e,t).then((function(t){f||(f=!0,i[a]=t,--u||r(i))}),o)})),--u||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=zn(e),r=n.reject,o=An((function(){var o=yt(e.resolve);Me(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}}),mt({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=xn.f(e),r=n.resolve,o=n.reject,i=An((function(){var n=yt(e.resolve),o=[],i=0,c=1;Me(t,(function(t){var u=i++,a=!1;o.push(void 0),c++,n.call(e,t).then((function(t){a||(a=!0,o[u]={status:"fulfilled",value:t},--c||r(o))}),(function(t){a||(a=!0,o[u]={status:"rejected",reason:t},--c||r(o))}))})),--c||r(o)}));return i.error&&o(i.value),n.promise}});var cr,ur=!!Ee&&l((function(){Ee.prototype.finally.call({then:function(){}},(function(){}))}));mt({target:"Promise",proto:!0,real:!0,forced:ur},{finally:function(t){var e=Ke(this,qt("Promise")),n="function"==typeof t;return this.then(n?function(n){return jn(e,t()).then((function(){return n}))}:t,n?function(n){return jn(e,t()).then((function(){throw n}))}:t)}}),(cr=t)&&cr.default;var ar=vt.Promise,fr=[].slice,sr={},lr=function(t,e,n){if(!(e in sr)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";sr[e]=Function("C,a","return new C("+r.join(",")+")")}return sr[e](t,n)},pr=Function.bind||function(t){var e=yt(this),n=fr.call(arguments,1),r=function(){var o=n.concat(fr.call(arguments));return this instanceof r?lr(e,o.length,o):e.apply(t,o)};return h(e.prototype)&&(r.prototype=e.prototype),r};mt({target:"Function",proto:!0},{bind:pr});var hr=function(t){return vt[t+"Prototype"]},vr=hr("Function").bind,yr=Function.prototype,dr=function(t){var e=t.bind;return t===yr||t instanceof Function&&e===yr.bind?vr:e},_r=Array.isArray||function(t){return"Array"==et(t)},gr=function(t,e,n){var r=m(e);r in t?b.f(t,r,w(0,n)):t[r]=n},mr=Tt("species"),kr=function(t,e){var n;return _r(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!_r(n.prototype)?h(n)&&null===(n=n[mr])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},br=Tt("species"),wr=function(t){return In>=51||!l((function(){var e=[];return(e.constructor={})[br]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Sr=Tt("isConcatSpreadable"),Er=In>=51||!l((function(){var t=[];return t[Sr]=!1,t.concat()[0]!==t})),xr=wr("concat"),jr=function(t){if(!h(t))return!1;var e=t[Sr];return void 0!==e?!!e:_r(t)};mt({target:"Array",proto:!0,forced:!Er||!xr},{concat:function(t){var e,n,r,o,i,c=kt(this),u=kr(c,0),a=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?c:arguments[e],jr(i)){if(a+(o=Ft(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,a++)n in i&&gr(u,a,i[n])}else{if(a>=9007199254740991)throw TypeError("Maximum allowed index exceeded");gr(u,a++,i)}return u.length=a,u}});var Ar=hr("Array").concat,Pr=Array.prototype,Or=function(t){var e=t.concat;return t===Pr||t instanceof Array&&e===Pr.concat?Ar:e};var Tr=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};mt({target:"Object",stat:!0,forced:!p,sham:!p},{defineProperty:b.f});var Lr=a((function(t){var e=vt.Object,n=t.exports=function(t,n,r){return e.defineProperty(t,n,r)};e.defineProperty.sham&&(n.sham=!0)}));function Mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Lr(t,r.key,r)}}var Cr=function(t,e,n){return e&&Mr(t.prototype,e),n&&Mr(t,n),t},Ir=[].push,Fr=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,c=5==t||i;return function(u,a,f,s){for(var l,p,h=kt(u),v=rt(h),y=dt(a,f,3),d=Ft(v.length),_=0,g=s||kr,m=e?g(u,d):n?g(u,0):void 0;d>_;_++)if((c||_ in v)&&(p=y(l=v[_],_,h),t))if(e)m[_]=p;else if(p)switch(t){case 3:return!0;case 5:return l;case 6:return _;case 2:Ir.call(m,l)}else if(o)return!1;return i?-1:r||o?o:m}},Nr={forEach:Fr(0),map:Fr(1),filter:Fr(2),some:Fr(3),every:Fr(4),find:Fr(5),findIndex:Fr(6)},Rr=Object.defineProperty,Vr={},Dr=function(t){throw t},Br=function(t,e){if(C(Vr,t))return Vr[t];e||(e={});var n=[][t],r=!!C(e,"ACCESSORS")&&e.ACCESSORS,o=C(e,0)?e[0]:Dr,i=C(e,1)?e[1]:void 0;return Vr[t]=!!n&&!l((function(){if(r&&!p)return!0;var t={length:-1};r?Rr(t,1,{enumerable:!0,get:Dr}):t[1]=1,n.call(t,o,i)}))},Gr=Nr.filter,Kr=wr("filter"),Ur=Br("filter");mt({target:"Array",proto:!0,forced:!Kr||!Ur},{filter:function(t){return Gr(this,t,arguments.length>1?arguments[1]:void 0)}});var qr=hr("Array").filter,zr=Array.prototype,Hr=function(t){var e=t.filter;return t===zr||t instanceof Array&&e===zr.filter?qr:e},Wr=function(t,e){var n=[][t];return!!n&&l((function(){n.call(null,e||function(){throw 1},1)}))},Xr=Nr.forEach,Yr=Wr("forEach"),Jr=Br("forEach"),Qr=Yr&&Jr?[].forEach:function(t){return Xr(this,t,arguments.length>1?arguments[1]:void 0)};mt({target:"Array",proto:!0,forced:[].forEach!=Qr},{forEach:Qr});var Zr=hr("Array").forEach,$r=Array.prototype,to={DOMTokenList:!0,NodeList:!0},eo=function(t){var e=t.forEach;return t===$r||t instanceof Array&&e===$r.forEach||to.hasOwnProperty(ee(t))?Zr:e},no=Nr.every,ro=Wr("every"),oo=Br("every");mt({target:"Array",proto:!0,forced:!ro||!oo},{every:function(t){return no(this,t,arguments.length>1?arguments[1]:void 0)}});var io=hr("Array").every,co=Array.prototype,uo=function(t){var e=t.every;return t===co||t instanceof Array&&e===co.every?io:e};mt({target:"Array",stat:!0},{isArray:_r});var ao=vt.Array.isArray,fo=ao,so=function(t){return fo(t)},lo=function(t){return"[object Object]"===Object.prototype.toString.call(t)},po=function(t){return"string"==typeof t},ho=function(t){return"number"==typeof t},vo=function(){function t(){Tr(this,t),this._stack={}}return Cr(t,[{key:"initStack",value:function(t){po(t)&&(this._stack[t]||(this._stack[t]=[]))}},{key:"initStacks",value:function(t){var e,n=this;t=Or(e=[]).call(e,t),eo(t).call(t,(function(t){n.initStack(t)}))}},{key:"queryStack",value:function(t){return this.initStack(t),this._stack[t]}},{key:"setStack",value:function(t,e){var n;this._stack[t]=Or(n=[]).call(n,e)}},{key:"pushStack",value:function(t,e){return this.initStack(t),this._stack[t].push(e)}},{key:"push",value:function(t,e){return this.pushStack(t,e)}},{key:"pushStacks",value:function(t,e){var n,r=this;t=Or(n=[]).call(n,t),this.initStacks(t),eo(t).call(t,(function(t){r.pushStack(t,e)}))}},{key:"popStack",value:function(t){return this.initStack(t),this._stack[t].shift()}},{key:"pop",value:function(t){return this.popStack(t)}},{key:"popStacks",value:function(t){var e,n=this;t=Or(e=[]).call(e,t);var r=[];return this.initStacks(t),eo(t).call(t,(function(t){r.push(n.popStack(t))})),r}},{key:"checkKey",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e=e<1?1:e,so(this._stack[t])&&this._stack[t].length>=e}},{key:"checkKeys",value:function(t,e){var n,r=this;return t=Or(n=[]).call(n,t),uo(t).call(t,(function(t){return r.checkKey(t,e)}))}},{key:"forEachByKey",value:function(t,e){var n,r=this;this.checkKey(t)&&eo(n=this._stack[t]).call(n,(function(n,o){e&&e(n,o,r._stack[t])}))}},{key:"clear",value:function(){this._stack={}}}]),t}(),yo=function(){return new vo},_o=function(){function t(){Tr(this,t),this._pp={}}return Cr(t,[{key:"_initProxy",value:function(t){this._pp[t]||(this._pp[t]=yo())}},{key:"_executeBefore",value:function(t,e){this._pp[t].forEachByKey("__EVENT__BEFORE__EXECUTE__",(function(n){n&&n.done&&n.done(t,e)}))}},{key:"_execute",value:function(t,e){this._pp[t].forEachByKey("__EVENT__",(function(n){n&&n.done&&n.done(t,e)}))}},{key:"_executeAfter",value:function(t,e){this._pp[t].forEachByKey("__EVENT__AFTER_EXECUTE__",(function(n){n&&n.done&&n.done(t,e)}))}},{key:"_beforeExecute",value:function(t,e){this._initProxy(t),this._pp[t].pushStack("__EVENT__BEFORE__EXECUTE__",e)}},{key:"beforeExecute",value:function(t,e){var n,r=this;t=Or(n=[]).call(n,t),eo(t).call(t,(function(t){r._beforeExecute(t,e)}))}},{key:"_afterExecute",value:function(t,e){this._initProxy(t),this._pp[t].pushStack("__EVENT__AFTER_EXECUTE__",e)}},{key:"afterExecute",value:function(t,e){var n,r=this;t=Or(n=[]).call(n,t),eo(t).call(t,(function(t){r._afterExecute(t,e)}))}},{key:"assignProxy",value:function(t,e){this._initProxy(t),this._pp[t].pushStack("__EVENT__",e)}},{key:"assignProxys",value:function(t,e){var n,r=this;t=Or(n=[]).call(n,t),eo(t).call(t,(function(t){r.assignProxy(t,e)}))}},{key:"fireProxy",value:function(t,e){if(e&&t){var n=this._pp[t].queryStack("__EVENT__");this._pp[t].setStack("__EVENT__",Hr(n).call(n,(function(t){return!t.isDeepEqualEvent(e)})))}}},{key:"fireProxys",value:function(t,e){var n,r=this;t=Or(n=[]).call(n,t),eo(t).call(t,(function(t){r.fireProxy(t,e)}))}},{key:"emitProxy",value:function(t,e){this._pp[t]&&(this._executeBefore(t,e),this._execute(t,e),this._executeAfter(t,e))}}]),t}(),go=ao;var mo=function(t){if(go(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}},ko=!Be((function(t){Array.from(t)}));mt({target:"Array",stat:!0,forced:ko},{from:function(t){var e,n,r,o,i,c,u=kt(t),a="function"==typeof this?this:Array,f=arguments.length,s=f>1?arguments[1]:void 0,l=void 0!==s,p=Te(u),h=0;if(l&&(s=dt(s,f>2?arguments[2]:void 0,2)),null==p||a==Array&&Pe(p))for(n=new a(e=Ft(u.length));e>h;h++)c=l?s(u[h],h):u[h],gr(n,h,c);else for(i=(o=p.call(u)).next,n=new a;!(r=i.call(o)).done;h++)c=l?Le(o,s,[r.value,h],!0):r.value,gr(n,h,c);return n.length=h,n}});var bo=vt.Array.from,wo=Tt("iterator"),So=function(t){var e=Object(t);return void 0!==e[wo]||"@@iterator"in e||ce.hasOwnProperty(ee(e))};var Eo=function(t){if(So(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return bo(t)};var xo=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var jo=function(t){return mo(t)||Eo(t)||xo()},Ao=function(){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Tr(this,t),this._ev=Or(r=[]).call(r,e),this._cb=n,this._sp=yo(),this._wc=Math.abs(o)}return Cr(t,[{key:"isDeepEqualEvent",value:function(t){return this._cb===t._cb&&this._ev.join("")===t._ev.join("")&&this._wc===t._wc}},{key:"execute",value:function(){if(this._sp.checkKeys(this._ev,this._wc)){for(var t=[],e=0;e<this._wc;e++)t.push(this._sp.popStacks(this._ev));1===t.length&&(t=t[0]),this._cb&&this._cb.apply(this,jo(t))}}},{key:"done",value:function(t,e){var n;t=Or(n=[]).call(n,t),this._sp.pushStacks(t,e),this.execute()}}]),t}(),Po=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return n=n<1?1:n,new Ao(t,e,Math.ceil(n))},Oo=function(){function t(){Tr(this,t),this._proxy=new _o,this._proxy_loop_split=","}return Cr(t,[{key:"_addProxys",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t=Or(n=[]).call(n,t),this._proxy.assignProxys(t,Po(t,e,r))}},{key:"_addProxysLoops",value:function(t){for(var e in t)this.register(e.split(this._proxy_loop_split),t[e])}},{key:"_removeProxys",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t=Or(n=[]).call(n,t),this._proxy.fireProxys(t,Po(t,e,r))}},{key:"_removeProxysLoops",value:function(t,e){for(var n in t)this.unregister(n.split(this._proxy_loop_split),t[n],e)}},{key:"_beforeLoops",value:function(t){for(var e in t)this.before(e.split(this._proxy_loop_split),t[e])}},{key:"_afterLoops",value:function(t){for(var e in t)this.after(e.split(this._proxy_loop_split),t[e])}},{key:"_onceLoops",value:function(t){for(var e in t)this.once(e.split(this._proxy_loop_split),t[e])}},{key:"_waitLoops",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(var n in t)this.wait(n.split(this._proxy_loop_split),t[n],e)}},{key:"_bindNTimesLoops",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(var n in t)this.bindNTimes(n.split(this._proxy_loop_split),t[n],e)}},{key:"setProxyLoopSplit",value:function(t){this._proxy_loop_split=t}},{key:"before",value:function(t,e){var n;if(lo(t))return this._beforeLoops(t);t=Or(n=[]).call(n,t),this._proxy.beforeExecute(t,Po(t,e))}},{key:"after",value:function(t,e){var n;if(lo(t))return this._afterLoops(t);t=Or(n=[]).call(n,t),this._proxy.afterExecute(t,Po(t,e))}},{key:"register",value:function(t,e){var n;return lo(t)?this._addProxysLoops(t):(this._addProxys(t,e),dr(n=this.unregister).call(n,this,t,e))}},{key:"subscribe",value:function(t,e){return this.register(t,e)}},{key:"bind",value:function(t,e){return this.register(t,e)}},{key:"on",value:function(t,e){return this.register(t,e)}},{key:"once",value:function(t,e){if(lo(t))return this._onceLoops(t);var n=this.register(t,(function(){e&&e.apply(void 0,arguments),n&&n()}));return n}},{key:"bindNTimes",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(lo(t))return ho(e)?this._bindNTimesLoops(t,e):this._bindNTimesLoops(t,n);n=n<1?1:n;var r=this.register(t,(function(){e&&e.apply(void 0,arguments),0===--n&&r&&r()}));return r}},{key:"wait",value:function(t,e,n){var r;return lo(t)?ho(e)?this._waitLoops(t,e):this._waitLoops(t,n):(this._addProxys(t,e,n),dr(r=this.unregister).call(r,this,t,e,n))}},{key:"unregister",value:function(t,e,n){if(lo(t))return this._removeProxysLoops(t,n);this._removeProxys(t,e,n)}},{key:"unsubscribe",value:function(t,e,n){this.unregister(t,e,n)}},{key:"unbind",value:function(t,e,n){this.unregister(t,e,n)}},{key:"off",value:function(t,e,n){this.unregister(t,e,n)}},{key:"emit",value:function(t,e){po(t)&&this._proxy.emitProxy(t,e)}},{key:"done",value:function(t,e){this.emit(t,e)}},{key:"async",value:function(t){var e,n=new ar((function(t){e=t}));return this.once(t,(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e(n)})),n}}]),t}();return function(t,e){var n=new Oo;return t&&e&&n.register(t,e),n}}));
