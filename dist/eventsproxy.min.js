!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).eventsproxy=e()}(this,function(){"use strict";var t=Object.freeze({}),e=Math.ceil,n=Math.floor,r=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)},o=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},i=function(t){return function(e,n){var i,c,u=String(o(e)),a=r(n),s=u.length;return a<0||a>=s?t?"":void 0:(i=u.charCodeAt(a))<55296||i>56319||a+1===s||(c=u.charCodeAt(a+1))<56320||c>57343?t?u.charAt(a):i:t?u.slice(a,a+2):c-56320+(i-55296<<10)+65536}},c={codeAt:i(!1),charAt:i(!0)},u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}var s,f,l,p="object",h=function(t){return t&&t.Math==Math&&t},v=h(typeof globalThis==p&&globalThis)||h(typeof window==p&&window)||h(typeof self==p&&self)||h(typeof u==p&&u)||Function("return this")(),y=function(t){try{return!!t()}catch(t){return!0}},d=!y(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),_=function(t){return"object"==typeof t?null!==t:"function"==typeof t},g=v.document,k=_(g)&&_(g.createElement),m=function(t){return k?g.createElement(t):{}},b=!d&&!y(function(){return 7!=Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a}),x=function(t){if(!_(t))throw TypeError(String(t)+" is not an object");return t},w=function(t,e){if(!_(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!_(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!_(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!_(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},E=Object.defineProperty,S={f:d?E:function(t,e,n){if(x(t),e=w(e,!0),x(n),b)try{return E(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},P=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},j=d?function(t,e,n){return S.f(t,e,P(1,n))}:function(t,e,n){return t[e]=n,t},A=a(function(t){var e=v["__core-js_shared__"]||function(t,e){try{j(v,t,e)}catch(n){v[t]=e}return e}("__core-js_shared__",{});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.2.1",mode:"pure",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),T=A("native-function-to-string",Function.toString),O=v.WeakMap,L="function"==typeof O&&/native code/.test(T.call(O)),M={}.hasOwnProperty,I=function(t,e){return M.call(t,e)},C=0,F=Math.random(),N=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++C+F).toString(36)},R=A("keys"),V=function(t){return R[t]||(R[t]=N(t))},D={},B=v.WeakMap;if(L){var G=new B,K=G.get,U=G.has,q=G.set;s=function(t,e){return q.call(G,t,e),e},f=function(t){return K.call(G,t)||{}},l=function(t){return U.call(G,t)}}else{var z=V("state");D[z]=!0,s=function(t,e){return j(t,z,e),e},f=function(t){return I(t,z)?t[z]:{}},l=function(t){return I(t,z)}}var H,W,X,Y={set:s,get:f,has:l,enforce:function(t){return l(t)?f(t):s(t,{})},getterFor:function(t){return function(e){var n;if(!_(e)||(n=f(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},J={}.propertyIsEnumerable,Q=Object.getOwnPropertyDescriptor,Z={f:Q&&!J.call({1:2},1)?function(t){var e=Q(this,t);return!!e&&e.enumerable}:J},$={}.toString,tt=function(t){return $.call(t).slice(8,-1)},et="".split,nt=y(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==tt(t)?et.call(t,""):Object(t)}:Object,rt=function(t){return nt(o(t))},ot=Object.getOwnPropertyDescriptor,it={f:d?ot:function(t,e){if(t=rt(t),e=w(e,!0),b)try{return ot(t,e)}catch(t){}if(I(t,e))return P(!Z.f.call(t,e),t[e])}},ct=/#|\.prototype\./,ut=function(t,e){var n=st[at(t)];return n==lt||n!=ft&&("function"==typeof e?y(e):!!e)},at=ut.normalize=function(t){return String(t).replace(ct,".").toLowerCase()},st=ut.data={},ft=ut.NATIVE="N",lt=ut.POLYFILL="P",pt=ut,ht={},vt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},yt=function(t,e,n){if(vt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},dt=it.f,_t=function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e},gt=function(t,e){var n,r,o,i,c,u,a,s,f=t.target,l=t.global,p=t.stat,h=t.proto,y=l?v:p?v[f]:(v[f]||{}).prototype,d=l?ht:ht[f]||(ht[f]={}),_=d.prototype;for(o in e)n=!pt(l?o:f+(p?".":"#")+o,t.forced)&&y&&I(y,o),c=d[o],n&&(u=t.noTargetGet?(s=dt(y,o))&&s.value:y[o]),i=n&&u?u:e[o],n&&typeof c==typeof i||(a=t.bind&&n?yt(i,v):t.wrap&&n?_t(i):h&&"function"==typeof i?yt(Function.call,i):i,(t.sham||i&&i.sham||c&&c.sham)&&j(a,"sham",!0),d[o]=a,h&&(I(ht,r=f+"Prototype")||j(ht,r,{}),ht[r][o]=i,t.real&&_&&!_[o]&&j(_,o,i)))},kt=function(t){return Object(o(t))},mt=!y(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),bt=V("IE_PROTO"),xt=Object.prototype,wt=mt?Object.getPrototypeOf:function(t){return t=kt(t),I(t,bt)?t[bt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?xt:null},Et=!!Object.getOwnPropertySymbols&&!y(function(){return!String(Symbol())}),St=v.Symbol,Pt=A("wks"),jt=function(t){return Pt[t]||(Pt[t]=Et&&St[t]||(Et?St:N)("Symbol."+t))},At=(jt("iterator"),!1);[].keys&&("next"in(X=[].keys())?(W=wt(wt(X)))!==Object.prototype&&(H=W):At=!0),null==H&&(H={});var Tt={IteratorPrototype:H,BUGGY_SAFARI_ITERATORS:At},Ot=Math.min,Lt=function(t){return t>0?Ot(r(t),9007199254740991):0},Mt=Math.max,It=Math.min,Ct=function(t){return function(e,n,o){var i,c=rt(e),u=Lt(c.length),a=function(t,e){var n=r(t);return n<0?Mt(n+e,0):It(n,e)}(o,u);if(t&&n!=n){for(;u>a;)if((i=c[a++])!=i)return!0}else for(;u>a;a++)if((t||a in c)&&c[a]===n)return t||a||0;return!t&&-1}},Ft={includes:Ct(!0),indexOf:Ct(!1)}.indexOf,Nt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Rt=Object.keys||function(t){return function(t,e){var n,r=rt(t),o=0,i=[];for(n in r)!I(D,n)&&I(r,n)&&i.push(n);for(;e.length>o;)I(r,n=e[o++])&&(~Ft(i,n)||i.push(n));return i}(t,Nt)},Vt=d?Object.defineProperties:function(t,e){x(t);for(var n,r=Rt(e),o=r.length,i=0;o>i;)S.f(t,n=r[i++],e[n]);return t},Dt=function(t){return"function"==typeof t?t:void 0},Bt=function(t,e){return arguments.length<2?Dt(ht[t])||Dt(v[t]):ht[t]&&ht[t][e]||v[t]&&v[t][e]},Gt=Bt("document","documentElement"),Kt=V("IE_PROTO"),Ut=function(){},qt=function(){var t,e=m("iframe"),n=Nt.length;for(e.style.display="none",Gt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),qt=t.F;n--;)delete qt.prototype[Nt[n]];return qt()},zt=Object.create||function(t,e){var n;return null!==t?(Ut.prototype=x(t),n=new Ut,Ut.prototype=null,n[Kt]=t):n=qt(),void 0===e?n:Vt(n,e)};D[Kt]=!0;var Ht=jt("toStringTag"),Wt="Arguments"==tt(function(){return arguments}()),Xt=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ht))?n:Wt?tt(e):"Object"==(r=tt(e))&&"function"==typeof e.callee?"Arguments":r},Yt={};Yt[jt("toStringTag")]="z";var Jt="[object z]"!==String(Yt)?function(){return"[object "+Xt(this)+"]"}:Yt.toString,Qt=S.f,Zt=jt("toStringTag"),$t=Jt!=={}.toString,te=function(t,e,n,r){if(t){var o=n?t:t.prototype;I(o,Zt)||Qt(o,Zt,{configurable:!0,value:e}),r&&$t&&j(o,"toString",Jt)}},ee={},ne=Tt.IteratorPrototype,re=function(){return this},oe=(Object.setPrototypeOf||"__proto__"in{}&&function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}}(),function(t,e,n,r){r&&r.enumerable?t[e]=n:j(t,e,n)}),ie=Tt.IteratorPrototype,ce=Tt.BUGGY_SAFARI_ITERATORS,ue=jt("iterator"),ae=function(){return this},se=function(t,e,n,r,o,i,c){!function(t,e,n){var r=e+" Iterator";t.prototype=zt(ne,{next:P(1,n)}),te(t,r,!1,!0),ee[r]=re}(n,e,r);var u,a,s,f=function(t){if(t===o&&y)return y;if(!ce&&t in h)return h[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",p=!1,h=t.prototype,v=h[ue]||h["@@iterator"]||o&&h[o],y=!ce&&v||f(o),d="Array"==e&&h.entries||v;if(d&&(u=wt(d.call(new t)),ie!==Object.prototype&&u.next&&(te(u,l,!0,!0),ee[l]=ae)),"values"==o&&v&&"values"!==v.name&&(p=!0,y=function(){return v.call(this)}),c&&h[ue]!==y&&j(h,ue,y),ee[e]=y,o)if(a={values:f("values"),keys:i?y:f("keys"),entries:f("entries")},c)for(s in a)!ce&&!p&&s in h||oe(h,s,a[s]);else gt({target:e,proto:!0,forced:ce||p},a);return a},fe=c.charAt,le=Y.set,pe=Y.getterFor("String Iterator");se(String,"String",function(t){le(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=pe(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=fe(n,r),e.index+=t.length,{value:t,done:!1})});var he=Y.set,ve=Y.getterFor("Array Iterator");se(Array,"Array",function(t,e){he(this,{type:"Array Iterator",target:rt(t),index:0,kind:e})},function(){var t=ve(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");ee.Arguments=ee.Array;var ye=jt("toStringTag");for(var de in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var _e=v[de],ge=_e&&_e.prototype;ge&&!ge[ye]&&j(ge,ye,de),ee[de]=ee.Array}var ke=v.Promise,me=jt("species"),be=jt("iterator"),xe=Array.prototype,we=function(t){return void 0!==t&&(ee.Array===t||xe[be]===t)},Ee=jt("iterator"),Se=function(t){if(null!=t)return t[Ee]||t["@@iterator"]||ee[Xt(t)]},Pe=function(t,e,n,r){try{return r?e(x(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&x(o.call(t)),e}},je=a(function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,o,i){var c,u,a,s,f,l,p=yt(n,r,o?2:1);if(i)c=t;else{if("function"!=typeof(u=Se(t)))throw TypeError("Target is not iterable");if(we(u)){for(a=0,s=Lt(t.length);s>a;a++)if((f=o?p(x(l=t[a])[0],l[1]):p(t[a]))&&f instanceof e)return f;return new e(!1)}c=u.call(t)}for(;!(l=c.next()).done;)if((f=Pe(c,p,l.value,o))&&f instanceof e)return f;return new e(!1)}).stop=function(t){return new e(!0,t)}}),Ae=jt("iterator"),Te=!1;try{var Oe=0,Le={next:function(){return{done:!!Oe++}},return:function(){Te=!0}};Le[Ae]=function(){return this},Array.from(Le,function(){throw 2})}catch(t){}var Me,Ie,Ce,Fe=function(t,e){if(!e&&!Te)return!1;var n=!1;try{var r={};r[Ae]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Ne=jt("species"),Re=function(t,e){var n,r=x(t).constructor;return void 0===r||null==(n=x(r)[Ne])?e:vt(n)},Ve=v.location,De=v.setImmediate,Be=v.clearImmediate,Ge=v.process,Ke=v.MessageChannel,Ue=v.Dispatch,qe=0,ze={},He=function(t){if(ze.hasOwnProperty(t)){var e=ze[t];delete ze[t],e()}},We=function(t){return function(){He(t)}},Xe=function(t){He(t.data)},Ye=function(t){v.postMessage(t+"",Ve.protocol+"//"+Ve.host)};De&&Be||(De=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return ze[++qe]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Me(qe),qe},Be=function(t){delete ze[t]},"process"==tt(Ge)?Me=function(t){Ge.nextTick(We(t))}:Ue&&Ue.now?Me=function(t){Ue.now(We(t))}:Ke?(Ce=(Ie=new Ke).port2,Ie.port1.onmessage=Xe,Me=yt(Ce.postMessage,Ce,1)):!v.addEventListener||"function"!=typeof postMessage||v.importScripts||y(Ye)?Me="onreadystatechange"in m("script")?function(t){Gt.appendChild(m("script")).onreadystatechange=function(){Gt.removeChild(this),He(t)}}:function(t){setTimeout(We(t),0)}:(Me=Ye,v.addEventListener("message",Xe,!1)));var Je,Qe,Ze,$e,tn,en,nn,rn,on={set:De,clear:Be},cn=Bt("navigator","userAgent")||"",un=it.f,an=on.set,sn=v.MutationObserver||v.WebKitMutationObserver,fn=v.process,ln=v.Promise,pn="process"==tt(fn),hn=un(v,"queueMicrotask"),vn=hn&&hn.value;vn||(Je=function(){var t,e;for(pn&&(t=fn.domain)&&t.exit();Qe;){e=Qe.fn,Qe=Qe.next;try{e()}catch(t){throw Qe?$e():Ze=void 0,t}}Ze=void 0,t&&t.enter()},pn?$e=function(){fn.nextTick(Je)}:sn&&!/(iphone|ipod|ipad).*applewebkit/i.test(cn)?(tn=!0,en=document.createTextNode(""),new sn(Je).observe(en,{characterData:!0}),$e=function(){en.data=tn=!tn}):ln&&ln.resolve?(nn=ln.resolve(void 0),rn=nn.then,$e=function(){rn.call(nn,Je)}):$e=function(){an.call(v,Je)});var yn,dn,_n,gn,kn=vn||function(t){var e={fn:t,next:void 0};Ze&&(Ze.next=e),Qe||(Qe=e,$e()),Ze=e},mn=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=vt(e),this.reject=vt(n)},bn={f:function(t){return new mn(t)}},xn=function(t,e){if(x(t),_(e)&&e.constructor===t)return e;var n=bn.f(t);return(0,n.resolve)(e),n.promise},wn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},En=on.set,Sn=jt("species"),Pn="Promise",jn=Y.get,An=Y.set,Tn=Y.getterFor(Pn),On=ke,Ln=v.TypeError,Mn=v.document,In=v.process,Cn=(v.fetch,In&&In.versions),Fn=Cn&&Cn.v8||"",Nn=bn.f,Rn=Nn,Vn="process"==tt(In),Dn=!!(Mn&&Mn.createEvent&&v.dispatchEvent),Bn=pt(Pn,function(){var t=On.resolve(1),e=function(){},n=(t.constructor={})[Sn]=function(t){t(e,e)};return!((Vn||"function"==typeof PromiseRejectionEvent)&&t.finally&&t.then(e)instanceof n&&0!==Fn.indexOf("6.6")&&-1===cn.indexOf("Chrome/66"))}),Gn=Bn||!Fe(function(t){On.all(t).catch(function(){})}),Kn=function(t){var e;return!(!_(t)||"function"!=typeof(e=t.then))&&e},Un=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;kn(function(){for(var o=e.value,i=1==e.state,c=0;r.length>c;){var u,a,s,f=r[c++],l=i?f.ok:f.fail,p=f.resolve,h=f.reject,v=f.domain;try{l?(i||(2===e.rejection&&Wn(t,e),e.rejection=1),!0===l?u=o:(v&&v.enter(),u=l(o),v&&(v.exit(),s=!0)),u===f.promise?h(Ln("Promise-chain cycle")):(a=Kn(u))?a.call(u,p,h):p(u)):h(o)}catch(t){v&&!s&&v.exit(),h(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&zn(t,e)})}},qn=function(t,e,n){var r,o;Dn?((r=Mn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),v.dispatchEvent(r)):r={promise:e,reason:n},(o=v["on"+t])?o(r):"unhandledrejection"===t&&function(t,e){var n=v.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},zn=function(t,e){En.call(v,function(){var n,r=e.value;if(Hn(e)&&(n=wn(function(){Vn?In.emit("unhandledRejection",r,t):qn("unhandledrejection",t,r)}),e.rejection=Vn||Hn(e)?2:1,n.error))throw n.value})},Hn=function(t){return 1!==t.rejection&&!t.parent},Wn=function(t,e){En.call(v,function(){Vn?In.emit("rejectionHandled",t):qn("rejectionhandled",t,e.value)})},Xn=function(t,e,n,r){return function(o){t(e,n,o,r)}},Yn=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Un(t,e,!0))},Jn=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw Ln("Promise can't be resolved itself");var o=Kn(n);o?kn(function(){var r={done:!1};try{o.call(n,Xn(Jn,t,r,e),Xn(Yn,t,r,e))}catch(n){Yn(t,r,n,e)}}):(e.value=n,e.state=1,Un(t,e,!1))}catch(n){Yn(t,{done:!1},n,e)}}};Bn&&(On=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,On,Pn),vt(t),yn.call(this);var e=jn(this);try{t(Xn(Jn,this,e),Xn(Yn,this,e))}catch(t){Yn(this,e,t)}},(yn=function(t){An(this,{type:Pn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)n&&n.unsafe&&t[r]?t[r]=e[r]:oe(t,r,e[r],n);return t}(On.prototype,{then:function(t,e){var n=Tn(this),r=Nn(Re(this,On));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Vn?In.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Un(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),dn=function(){var t=new yn,e=jn(t);this.promise=t,this.resolve=Xn(Jn,t,e),this.reject=Xn(Yn,t,e)},bn.f=Nn=function(t){return t===On||t===_n?new dn(t):Rn(t)}),gt({global:!0,wrap:!0,forced:Bn},{Promise:On}),te(On,Pn,!1,!0),function(t){var e=Bt(t),n=S.f;d&&e&&!e[me]&&n(e,me,{configurable:!0,get:function(){return this}})}(Pn),_n=ht.Promise,gt({target:Pn,stat:!0,forced:Bn},{reject:function(t){var e=Nn(this);return e.reject.call(void 0,t),e.promise}}),gt({target:Pn,stat:!0,forced:!0},{resolve:function(t){return xn(this===_n?On:this,t)}}),gt({target:Pn,stat:!0,forced:Gn},{all:function(t){var e=this,n=Nn(e),r=n.resolve,o=n.reject,i=wn(function(){var n=vt(e.resolve),i=[],c=0,u=1;je(t,function(t){var a=c++,s=!1;i.push(void 0),u++,n.call(e,t).then(function(t){s||(s=!0,i[a]=t,--u||r(i))},o)}),--u||r(i)});return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=Nn(e),r=n.reject,o=wn(function(){var o=vt(e.resolve);je(t,function(t){o.call(e,t).then(n.resolve,r)})});return o.error&&r(o.value),n.promise}}),gt({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=bn.f(e),r=n.resolve,o=n.reject,i=wn(function(){var n=vt(e.resolve),o=[],i=0,c=1;je(t,function(t){var u=i++,a=!1;o.push(void 0),c++,n.call(e,t).then(function(t){a||(a=!0,o[u]={status:"fulfilled",value:t},--c||r(o))},function(t){a||(a=!0,o[u]={status:"rejected",reason:t},--c||r(o))})}),--c||r(o)});return i.error&&o(i.value),n.promise}}),gt({target:"Promise",proto:!0,real:!0},{finally:function(t){var e=Re(this,Bt("Promise")),n="function"==typeof t;return this.then(n?function(n){return xn(e,t()).then(function(){return n})}:t,n?function(n){return xn(e,t()).then(function(){throw n})}:t)}}),(gn=t)&&gn.default;var Qn=ht.Promise,Zn=[].slice,$n={},tr=function(t,e,n){if(!(e in $n)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";$n[e]=Function("C,a","return new C("+r.join(",")+")")}return $n[e](t,n)},er=Function.bind||function(t){var e=vt(this),n=Zn.call(arguments,1),r=function(){var o=n.concat(Zn.call(arguments));return this instanceof r?tr(e,o.length,o):e.apply(t,o)};return _(e.prototype)&&(r.prototype=e.prototype),r};gt({target:"Function",proto:!0},{bind:er});var nr=function(t){return ht[t+"Prototype"]},rr=nr("Function").bind,or=Function.prototype,ir=function(t){var e=t.bind;return t===or||t instanceof Function&&e===or.bind?rr:e},cr=Array.isArray||function(t){return"Array"==tt(t)},ur=function(t,e,n){var r=w(e);r in t?S.f(t,r,P(0,n)):t[r]=n},ar=jt("species"),sr=function(t,e){var n;return cr(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!cr(n.prototype)?_(n)&&null===(n=n[ar])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},fr=jt("species"),lr=function(t){return!y(function(){var e=[];return(e.constructor={})[fr]=function(){return{foo:1}},1!==e[t](Boolean).foo})},pr=jt("isConcatSpreadable"),hr=!y(function(){var t=[];return t[pr]=!1,t.concat()[0]!==t}),vr=lr("concat"),yr=function(t){if(!_(t))return!1;var e=t[pr];return void 0!==e?!!e:cr(t)};gt({target:"Array",proto:!0,forced:!hr||!vr},{concat:function(t){var e,n,r,o,i,c=kt(this),u=sr(c,0),a=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?c:arguments[e],yr(i)){if(a+(o=Lt(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,a++)n in i&&ur(u,a,i[n])}else{if(a>=9007199254740991)throw TypeError("Maximum allowed index exceeded");ur(u,a++,i)}return u.length=a,u}});var dr=nr("Array").concat,_r=Array.prototype,gr=function(t){var e=t.concat;return t===_r||t instanceof Array&&e===_r.concat?dr:e};var kr=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};gt({target:"Object",stat:!0,forced:!d,sham:!d},{defineProperty:S.f});var mr=a(function(t){var e=ht.Object,n=t.exports=function(t,n,r){return e.defineProperty(t,n,r)};e.defineProperty.sham&&(n.sham=!0)});function br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),mr(t,r.key,r)}}var xr=function(t,e,n){return e&&br(t.prototype,e),n&&br(t,n),t},wr=[].push,Er=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,c=5==t||i;return function(u,a,s,f){for(var l,p,h=kt(u),v=nt(h),y=yt(a,s,3),d=Lt(v.length),_=0,g=f||sr,k=e?g(u,d):n?g(u,0):void 0;d>_;_++)if((c||_ in v)&&(p=y(l=v[_],_,h),t))if(e)k[_]=p;else if(p)switch(t){case 3:return!0;case 5:return l;case 6:return _;case 2:wr.call(k,l)}else if(o)return!1;return i?-1:r||o?o:k}},Sr={forEach:Er(0),map:Er(1),filter:Er(2),some:Er(3),every:Er(4),find:Er(5),findIndex:Er(6)},Pr=Sr.filter;gt({target:"Array",proto:!0,forced:!lr("filter")},{filter:function(t){return Pr(this,t,arguments.length>1?arguments[1]:void 0)}});var jr=nr("Array").filter,Ar=Array.prototype,Tr=function(t){var e=t.filter;return t===Ar||t instanceof Array&&e===Ar.filter?jr:e},Or=function(t,e){var n=[][t];return!n||!y(function(){n.call(null,e||function(){throw 1},1)})},Lr=Sr.forEach,Mr=Or("forEach")?function(t){return Lr(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach;gt({target:"Array",proto:!0,forced:[].forEach!=Mr},{forEach:Mr});var Ir=nr("Array").forEach,Cr=Array.prototype,Fr={DOMTokenList:!0,NodeList:!0},Nr=function(t){var e=t.forEach;return t===Cr||t instanceof Array&&e===Cr.forEach||Fr.hasOwnProperty(Xt(t))?Ir:e},Rr=Sr.every;gt({target:"Array",proto:!0,forced:Or("every")},{every:function(t){return Rr(this,t,arguments.length>1?arguments[1]:void 0)}});var Vr=nr("Array").every,Dr=Array.prototype,Br=function(t){var e=t.every;return t===Dr||t instanceof Array&&e===Dr.every?Vr:e};gt({target:"Array",stat:!0},{isArray:cr});var Gr=ht.Array.isArray,Kr=Gr,Ur=function(t){return Kr(t)},qr=function(t){return"[object Object]"===Object.prototype.toString.call(t)},zr=function(t){return"string"==typeof t},Hr=function(t){return"number"==typeof t},Wr=function(){function t(){kr(this,t),this._stack={}}return xr(t,[{key:"initStack",value:function(t){zr(t)&&(this._stack[t]||(this._stack[t]=[]))}},{key:"initStacks",value:function(t){var e,n=this;t=gr(e=[]).call(e,t),Nr(t).call(t,function(t){n.initStack(t)})}},{key:"queryStack",value:function(t){return this.initStack(t),this._stack[t]}},{key:"setStack",value:function(t,e){var n;this._stack[t]=gr(n=[]).call(n,e)}},{key:"pushStack",value:function(t,e){return this.initStack(t),this._stack[t].push(e)}},{key:"push",value:function(t,e){return this.pushStack(t,e)}},{key:"pushStacks",value:function(t,e){var n,r=this;t=gr(n=[]).call(n,t),this.initStacks(t),Nr(t).call(t,function(t){r.pushStack(t,e)})}},{key:"popStack",value:function(t){return this.initStack(t),this._stack[t].shift()}},{key:"pop",value:function(t){return this.popStack(t)}},{key:"popStacks",value:function(t){var e,n=this;t=gr(e=[]).call(e,t);var r=[];return this.initStacks(t),Nr(t).call(t,function(t){r.push(n.popStack(t))}),r}},{key:"checkKey",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e=e<1?1:e,Ur(this._stack[t])&&this._stack[t].length>=e}},{key:"checkKeys",value:function(t,e){var n,r=this;return t=gr(n=[]).call(n,t),Br(t).call(t,function(t){return r.checkKey(t,e)})}},{key:"forEachByKey",value:function(t,e){var n,r=this;this.checkKey(t)&&Nr(n=this._stack[t]).call(n,function(n,o){e&&e(n,o,r._stack[t])})}},{key:"clear",value:function(){this._stack={}}}]),t}(),Xr=function(){return new Wr},Yr=",",Jr=function(){function t(){kr(this,t),this._pp={}}return xr(t,[{key:"_initProxy",value:function(t){this._pp[t]||(this._pp[t]=Xr())}},{key:"_executeBefore",value:function(t,e){this._pp[t].forEachByKey("__EVENT__BEFORE__EXECUTE__",function(n){n&&n.done&&n.done(t,e)})}},{key:"_execute",value:function(t,e){this._pp[t].forEachByKey("__EVENT__",function(n){n&&n.done&&n.done(t,e)})}},{key:"_executeAfter",value:function(t,e){this._pp[t].forEachByKey("__EVENT__AFTER_EXECUTE__",function(n){n&&n.done&&n.done(t,e)})}},{key:"_beforeExecute",value:function(t,e){this._initProxy(t),this._pp[t].pushStack("__EVENT__BEFORE__EXECUTE__",e)}},{key:"beforeExecute",value:function(t,e){var n,r=this;t=gr(n=[]).call(n,t),Nr(t).call(t,function(t){r._beforeExecute(t,e)})}},{key:"_afterExecute",value:function(t,e){this._initProxy(t),this._pp[t].pushStack("__EVENT__AFTER_EXECUTE__",e)}},{key:"afterExecute",value:function(t,e){var n,r=this;t=gr(n=[]).call(n,t),Nr(t).call(t,function(t){r._afterExecute(t,e)})}},{key:"assignProxy",value:function(t,e){this._initProxy(t),this._pp[t].pushStack("__EVENT__",e)}},{key:"assignProxys",value:function(t,e){var n,r=this;t=gr(n=[]).call(n,t),Nr(t).call(t,function(t){r.assignProxy(t,e)})}},{key:"fireProxy",value:function(t,e){if(e&&t){var n=this._pp[t].queryStack("__EVENT__");this._pp[t].setStack("__EVENT__",Tr(n).call(n,function(t){return!t.isDeepEqualEvent(e)}))}}},{key:"fireProxys",value:function(t,e){var n,r=this;t=gr(n=[]).call(n,t),Nr(t).call(t,function(t){r.fireProxy(t,e)})}},{key:"emitProxy",value:function(t,e){this._pp[t]&&(this._executeBefore(t,e),this._execute(t,e),this._executeAfter(t,e))}}]),t}(),Qr=function(){return new Jr},Zr=Gr;var $r=function(t){if(Zr(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}},to=!Fe(function(t){Array.from(t)});gt({target:"Array",stat:!0,forced:to},{from:function(t){var e,n,r,o,i=kt(t),c="function"==typeof this?this:Array,u=arguments.length,a=u>1?arguments[1]:void 0,s=void 0!==a,f=0,l=Se(i);if(s&&(a=yt(a,u>2?arguments[2]:void 0,2)),null==l||c==Array&&we(l))for(n=new c(e=Lt(i.length));e>f;f++)ur(n,f,s?a(i[f],f):i[f]);else for(o=l.call(i),n=new c;!(r=o.next()).done;f++)ur(n,f,s?Pe(o,a,[r.value,f],!0):r.value);return n.length=f,n}});var eo=ht.Array.from,no=jt("iterator"),ro=function(t){var e=Object(t);return void 0!==e[no]||"@@iterator"in e||ee.hasOwnProperty(Xt(e))};var oo=function(t){if(ro(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return eo(t)};var io=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var co=function(t){return $r(t)||oo(t)||io()},uo=function(){function t(e,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;kr(this,t),this._ev=gr(r=[]).call(r,e),this._cb=n,this._sp=Xr(),this._wc=Math.abs(o)}return xr(t,[{key:"isDeepEqualEvent",value:function(t){return this._cb===t._cb&&this._ev.join("")===t._ev.join("")&&this._wc===t._wc}},{key:"execute",value:function(){if(this._sp.checkKeys(this._ev,this._wc)){for(var t=[],e=0;e<this._wc;e++)t.push(this._sp.popStacks(this._ev));1===t.length&&(t=t[0]),this._cb&&this._cb.apply(this,co(t))}}},{key:"done",value:function(t,e){var n;t=gr(n=[]).call(n,t),this._sp.pushStacks(t,e),this.execute()}}]),t}(),ao=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return n=n<1?1:n,new uo(t,e,Math.ceil(n))},so=function(){function t(){kr(this,t),this._proxy=Qr(),this._proxy_loop_split=Yr}return xr(t,[{key:"_addProxys",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t=gr(n=[]).call(n,t),this._proxy.assignProxys(t,ao(t,e,r))}},{key:"_addProxysLoops",value:function(t){for(var e in t)this.register(e.split(this._proxy_loop_split),t[e])}},{key:"_removeProxys",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t=gr(n=[]).call(n,t),this._proxy.fireProxys(t,ao(t,e,r))}},{key:"_removeProxysLoops",value:function(t,e){for(var n in t)this.unregister(n.split(this._proxy_loop_split),t[n],e)}},{key:"_beforeLoops",value:function(t){for(var e in t)this.before(e.split(this._proxy_loop_split),t[e])}},{key:"_afterLoops",value:function(t){for(var e in t)this.after(e.split(this._proxy_loop_split),t[e])}},{key:"_onceLoops",value:function(t){for(var e in t)this.once(e.split(this._proxy_loop_split),t[e])}},{key:"_waitLoops",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(var n in t)this.wait(n.split(this._proxy_loop_split),t[n],e)}},{key:"_bindNTimesLoops",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(var n in t)this.bindNTimes(n.split(this._proxy_loop_split),t[n],e)}},{key:"setProxyLoopSplit",value:function(t){this._proxy_loop_split=t}},{key:"before",value:function(t,e){var n;if(qr(t))return this._beforeLoops(t);t=gr(n=[]).call(n,t),this._proxy.beforeExecute(t,ao(t,e))}},{key:"after",value:function(t,e){var n;if(qr(t))return this._afterLoops(t);t=gr(n=[]).call(n,t),this._proxy.afterExecute(t,ao(t,e))}},{key:"register",value:function(t,e){var n;return qr(t)?this._addProxysLoops(t):(this._addProxys(t,e),ir(n=this.unregister).call(n,this,t,e))}},{key:"subscribe",value:function(t,e){return this.register(t,e)}},{key:"bind",value:function(t,e){return this.register(t,e)}},{key:"on",value:function(t,e){return this.register(t,e)}},{key:"once",value:function(t,e){if(qr(t))return this._onceLoops(t);var n=this.register(t,function(){e&&e.apply(void 0,arguments),n&&n()});return n}},{key:"bindNTimes",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(qr(t))return Hr(e)?this._bindNTimesLoops(t,e):this._bindNTimesLoops(t,n);n=n<1?1:n;var r=this.register(t,function(){e&&e.apply(void 0,arguments),0===--n&&r&&r()});return r}},{key:"wait",value:function(t,e,n){var r;return qr(t)?Hr(e)?this._waitLoops(t,e):this._waitLoops(t,n):(this._addProxys(t,e,n),ir(r=this.unregister).call(r,this,t,e,n))}},{key:"unregister",value:function(t,e,n){if(qr(t))return this._removeProxysLoops(t,n);this._removeProxys(t,e,n)}},{key:"unsubscribe",value:function(t,e,n){this.unregister(t,e,n)}},{key:"unbind",value:function(t,e,n){this.unregister(t,e,n)}},{key:"off",value:function(t,e,n){this.unregister(t,e,n)}},{key:"emit",value:function(t,e){zr(t)&&this._proxy.emitProxy(t,e)}},{key:"done",value:function(t,e){this.emit(t,e)}},{key:"async",value:function(t){var e,n=new Qn(function(t){e=t});return this.once(t,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e(n)}),n}}]),t}();return function(t,e){var n=new so;return t&&e&&n.register(t,e),n}});
